<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Client Intake — Jared Consulting</title>
  <meta name="description" content="Submit a client inquiry for AI strategy, automation, and analytics." />
  <meta name="theme-color" content="#2563eb" />
  <meta property="og:title" content="Client Intake — Jared Consulting" />
  <meta property="og:description" content="Submit a client inquiry for AI strategy, automation, and analytics." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/og-image.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Client Intake — Jared Consulting" />
  <meta name="twitter:description" content="Submit a client inquiry for AI strategy, automation, and analytics." />
  <link rel="stylesheet" href="styles.css" />
  <style>
    .wrap{padding:2rem 0}
    .card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:1.25rem}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    .field{display:grid;gap:.4rem}
    .actions{display:flex;gap:.6rem;flex-wrap:wrap}
    .note{color:var(--muted)}
    .error{color:#b91c1c;min-height:1.2em}
    .success { display:inline-flex;align-items:center;gap:.5rem;color:#065f46;background:#ecfdf5;border:1px solid #a7f3d0;padding:.45rem .7rem;border-radius:999px;opacity:0;transform:translateY(4px) scale(.98);transition:opacity .28s, transform .28s }
    .success.show{opacity:1;transform:translateY(0) scale(1)}
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Skip to content</a>
  <header class="site-header">
    <nav class="container nav" aria-label="Primary navigation">
      <a href="index.html#hero" class="logo">Jared<span>Consulting</span></a>
      <ul class="nav-links">
        <li><a href="index.html#services">Services</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main id="main" class="container wrap" tabindex="-1">
    <div class="card">
      <h1>Client Intake</h1>
      <p class="note">Provide a brief overview so we can prepare for a productive conversation.</p>
      <form id="intake" class="form" novalidate>
        <div class="row">
          <div class="field">
            <label for="companyName">Company name</label>
            <input id="companyName" name="companyName" type="text" required placeholder="e.g., Acme Corp" />
            <small class="error" id="err-companyName"></small>
          </div>
          <div class="field">
            <label for="website">Website</label>
            <input id="website" name="website" type="url" placeholder="https://example.com" />
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label for="contactName">Primary contact</label>
            <input id="contactName" name="contactName" type="text" required placeholder="Name" />
            <small class="error" id="err-contactName"></small>
          </div>
          <div class="field">
            <label for="contactEmail">Email</label>
            <input id="contactEmail" name="contactEmail" type="email" required inputmode="email" autocomplete="email" placeholder="name@example.com" pattern="^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$" />
            <small class="error" id="err-contactEmail"></small>
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label for="industry">Industry</label>
            <input id="industry" name="industry" type="text" placeholder="e.g., Retail" />
          </div>
          <div class="field">
            <label for="size">Company size</label>
            <select id="size" name="size">
              <option value="" selected>Choose…</option>
              <option value="1-10">1–10</option>
              <option value="11-50">11–50</option>
              <option value="51-250">51–250</option>
              <option value=">250">250+</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label for="focus">Primary focus area</label>
            <select id="focus" name="focus">
              <option value="" selected>Choose…</option>
              <option value="operations">Operations</option>
              <option value="marketing">Marketing</option>
              <option value="sales">Sales</option>
              <option value="finance">Finance</option>
              <option value="strategy">Strategy</option>
            </select>
          </div>
          <div class="field">
            <label for="timeline">Timeline</label>
            <select id="timeline" name="timeline">
              <option value="" selected>Choose…</option>
              <option value="<1m">Under 1 month</option>
              <option value="1-3m">1–3 months</option>
              <option value=">3m">Over 3 months</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label for="budget">Budget range (USD)</label>
            <select id="budget" name="budget">
              <option value="" selected>Choose…</option>
              <option value="<25k">Under 25k</option>
              <option value="25-75k">25–75k</option>
              <option value="75-200k">75–200k</option>
              <option value=">200k">200k+</option>
            </select>
          </div>
          <div class="field">
            <label for="source">How did you hear about us?</label>
            <input id="source" name="source" type="text" placeholder="e.g., Referral, Search, LinkedIn" />
          </div>
        </div>
        <div class="field">
          <label for="goals">Goals/Objectives</label>
          <textarea id="goals" name="goals" rows="4" required placeholder="What are you trying to achieve?"></textarea>
          <small class="error" id="err-goals"></small>
        </div>
        <div class="field">
          <label>Top challenges (up to 3)</label>
          <input id="ch1" type="text" placeholder="Challenge 1" />
          <input id="ch2" type="text" placeholder="Challenge 2" />
          <input id="ch3" type="text" placeholder="Challenge 3" />
        </div>
        <div class="field" style="display:flex;gap:.6rem;align-items:center">
          <input id="consent" name="consent" type="checkbox" required />
          <label for="consent">I agree to the processing of my information according to the privacy notice.</label>
        </div>
        <div class="actions">
          <button type="submit" class="btn btn-primary">Submit</button>
          <button type="button" id="saveDraft" class="btn btn-ghost">Save draft</button>
          <p id="status" role="status" aria-live="polite"></p>
        </div>
      </form>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <p>© <span id="year"></span> Jared Consulting.</p>
      <a class="to-top" href="#" aria-label="Back to top">↑</a>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = String(new Date().getFullYear());
    const form = document.getElementById('intake');
    const statusEl = document.getElementById('status');
    const DRAFT_KEY = 'jc_intake_draft_v1';

    const get = (id)=> document.getElementById(id);
    const setErr = (id, msg)=> { const el = document.getElementById('err-'+id); if (el) el.textContent = msg||''; };
    const simpleEmail = (v)=> /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(String(v||'').trim());

    // Load draft
    try {
      const d = JSON.parse(localStorage.getItem(DRAFT_KEY)||'null');
      if (d) {
        Object.entries(d).forEach(([k,v])=>{ const el = get(k); if (el) el.value = v; });
      }
    } catch {}

    // Save draft
    get('saveDraft').addEventListener('click', ()=>{
      const data = Object.fromEntries(new FormData(form).entries());
      localStorage.setItem(DRAFT_KEY, JSON.stringify(data));
      showSuccess('Draft saved');
    });

    function showSuccess(msg){
      statusEl.innerHTML = '<span class="success"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M20 6L9 17l-5-5"/></svg> '+msg+'</span>';
      const badge = statusEl.querySelector('.success');
      requestAnimationFrame(()=> badge?.classList.add('show'));
      setTimeout(()=>{ badge?.classList.remove('show'); setTimeout(()=> statusEl.textContent='', 300); }, 2500);
    }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      // clear errors
      ['companyName','contactName','contactEmail','goals'].forEach(id=> setErr(id,''));

      const data = Object.fromEntries(new FormData(form).entries());
      let ok = true;
      if (!data.companyName || String(data.companyName).trim().length < 2){ setErr('companyName','Please enter your company name.'); ok = false; }
      if (!data.contactName || String(data.contactName).trim().length < 2){ setErr('contactName','Please enter the primary contact.'); ok = false; }
      if (!simpleEmail(data.contactEmail)){ setErr('contactEmail','Please enter a valid email.'); ok = false; }
      if (!data.goals || String(data.goals).trim().length < 10){ setErr('goals','Please share a bit more detail.'); ok = false; }
      if (!get('consent').checked){ statusEl.textContent = 'Please consent to proceed.'; ok = false; } else { statusEl.textContent=''; }
      if (!ok) return;

      // Build payload
      const payload = {
        company: {
          name: String(data.companyName).trim(),
          website: String(data.website||'').trim(),
          industry: String(data.industry||'').trim(),
          size: String(data.size||'').trim(),
        },
        contact: {
          name: String(data.contactName).trim(),
          email: String(data.contactEmail).trim(),
        },
        inquiry: {
          focus: String(data.focus||'').trim(),
          timeline: String(data.timeline||'').trim(),
          budget: String(data.budget||'').trim(),
          source: String(data.source||'').trim(),
          goals: String(data.goals).trim(),
          challenges: [get('ch1').value.trim(), get('ch2').value.trim(), get('ch3').value.trim()].filter(Boolean),
        },
        meta: {
          submittedAt: new Date().toISOString(),
          userAgent: navigator.userAgent,
        }
      };

      // Simulate submit: download JSON and clear draft
      const blob = new Blob([JSON.stringify(payload, null, 2)], {type:'application/json'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'intake_'+ Date.now()+ '.json'; a.click(); URL.revokeObjectURL(a.href);
      localStorage.removeItem(DRAFT_KEY);
      form.reset();
      showSuccess('Submission ready (downloaded JSON). We will contact you shortly.');
    });
  </script>
</body>
</html>
